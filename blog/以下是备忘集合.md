以下是备忘集合

![图一][1]

<!--more-->以下是备忘集合

![图一][1]

<!--more-->

### 基本操作

![图二](http://wx4.sinaimg.cn/large/b1630646gy1fttwsj7xrzj20j605et9c.jpg)

### 一、yum源

- 有时候下载的yum并不如意，这是我用的

	```
	cd /etc/yum.repos.d/
	
	rm -rf *
	
	cat >epel.repo << EOF
	[epel]
	name=epel
	baseurl=https://mirrors.aliyun.com/epel/7/x86_64/
	gpgcheck=1
	gpgkey=https://mirrors.aliyun.com/epel/RPM-GPG-KEY-EPEL-7
	enabled=1
	EOF
	
	cat >centos7.repo << EOF
	[centos]
	name=centos-7
	baseurl=https://mirrors.aliyun.com/centos/7/os/x86_64/
	gpgkey=https://mirrors.aliyun.com/centos/7/os/x86_64/RPM-GPG-KEY-CentOS-7
	gpgcheck=1
	enabled=1
	EOF
	
	cat >extras.repo << EOF
	[Extras]
	name= extras
	baseurl=https://mirrors.aliyun.com/centos/7/extras/x86_64
	enabled=1
	gpgcheck=0
	EOF
	
	cat >gitlab.repo << EOF
	[gitlab-ce]
	name=gitlab-ce
	baseurl=http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7
	repo_gpgcheck=0
	gpgcheck=0
	enabled=0
	gpgkey=https://packages.gitlab.com/gpg.key
	EOF
	
	yum makecache
	
	cd ~
	cat >> .bashrc << EOF 
	alias ..='cd ..'
	alias ...='cd ...'
	alias cd..='cd ..'
	alias l='ll -h'
	alias rm='rm -i'
	alias yy='yum -y install'
	alias yr='yum -y remove'
	alias cdn='cd /etc/sysconfig/network-scripts/'
	alias cdrepo='cd /etc/yum.repos.d/'
	PS1="\[\e[1;31m\][\u@\h \W]\\$\[\e[0m\]"
	alias pw='ping www.baidu.com'
	alias p8='ping 8.8.8.8'
	alias pg='ping www.google.com'
	alias setssr='export ALL_PROXY=socks5://127.0.0.1:1080'
	alias unsetssr='unset ALL_PROXY'
	EOF
	
	source .bashrc
	
	# vim
	cd ~
	cat >> .vimrc << EOF
	set number
	set syntax=on
	set paste
	set history=3000	
	set background=dark			
	set autoindent		
	set smartindent		
	set tabstop=4		
	set shiftwidth=4	
	set showmatch		
	set guioptions-=T	
	set vb t_vb=		
	set ruler			
	set nohls			
	set incsearch		
	EOF
	
	source ~/.vimrc
	
	cat > /etc/motd <<EOF
	欢迎登陆 Red Hat Enterprise Linux ~
	EOF
	
	
	#╭﹌☆﹌﹌﹌☆﹌╮　
	#∣　　　　　　∣
	#∣　●　　　●  ∣　
	#∣　　　▽　 　∣
	#╰————— -   -—╯　
	#　∣﹏　﹏∣　　
	#　╰∪———∪╯
	
	
	# iptables
	iptables -F && systemctl stop iptables.service && systemctl disable iptables.service && iptables -vnL
	
	# SElinux
	sed -i '/SELINUX/s/enforcing/disabled/' /etc/selinux/config
	getenforce
	
	# tools
	yy tree
	yy lrzsz
	yy net-tools
	# yy openssl
	
	systemctl set-default multi-user.target  
	
	
	
	reboot
	
	
	
	
	```

### 二、日志

#### Oracle

```
oracle各类日志清理(一般oracle软件目录约10G左右)

一般先进$ORACLE_BASE目录，查看哪个目录占用较大空间，并层层深入，定位到占用较大的目录，判断文件类型并清理。如下：
[oracle@test-for-lihb ~]$ cat /etc/redhat-release 
Red Hat Enterprise Linux Server release 6.4 (Santiago)
[oracle@test-for-lihb ~]$ cd $ORACLE_BASE
[oracle@test-for-lihb /opt/app/oracle]$ du -sm *|sort -n
1	admin
1	afiedt.buf
1	checkpoints
3	cfgtoollogs
10	flash_recovery_area
1377	diag
8501	product


1 归档文件
 路径：
    （SQL> archive log list  由Archive destination获取归档路径）
 方法：
    通过rman删除归档文件
    [oracle@test-for-lihb ~]$ rman target /
    RMAN> delete archivelog all completed before 'sysdate-1'; （“1”对应是一天，若想删除6小时前的归档日志，则改为0.25）
    删除完归档，若有对应的备份策略需要重新启动全备。

2 alert告警日志文件
 路径：
    /alert_.log (由SQL> show parameter background_dump_dest/core_dump_dest/user_dump_dest获取日志文件位置)
 方法：
    1）将alert_.log清空 >alert_.log  (建议：tail -100000 alert_.log > alert_.log_bak20170601，保留10w行数据再删除)
    2）系统会自动生成新的alert_.log
    3）find . -mtime +30 -name "*.trc/trm" | wc -l 查看一个月之前的trc/trm文件数量
    4）find . -mtime +30 -name "*.trc/trm" | xargs rm -rf  删除一个月之前的trc/trm文件

3 监听日志文件
 路径：
    $ORACLE_HOME/network/log/listener.log (由$ lsnrctl status $监听名 中的Listener Log File 获取日志文件位置)
 若是log文件
    方法一：
        1）lsnrctl set log_status off
        2）将listener.log  删除或者移走(建议：tail -100000 listener.log > listener.log_bak20170601，保留10w行数据再删除)
        3）lsnrctl set log_status on此时系统重新生成listener.log 
    方法二：
        1）直接清空log文件：>listener.log (建议：tail -100000 listener.log > listener.log_bak20170601，保留10w行数据再删除)
 若是xml文件
    方法：
        保留log.xml，其他可以删除，比如：find . -mtime +30 -name "log_*.xml" | xargs rm -rf 
        同时，可清理同级trace目录的log文件：
        cd ../trace
        tail -100000 listener.log > listener.log_bak20170601
        >listener.log

4 OEM日志文件
 路径：
    $ORACLE_HOME/oc4j/j2ee/OC4J_DBConsole__/log/http-web-access.log或em-application.log
 方法：
    查看OEM状态：$ emctl status dbconsole
    若没有运行，则
    直接把http-web-access.log/em-application.log挪走或删除。
    若正在运行，则
    停止dbconsole（emctl stop dbconsole），
    将http-web-access.log/em-application.log挪走或删除，
    重新启动dbconsole(emctl start dbconsole),
    检查oem状态(emctl start dbconsole)。

5 CRS日志文件
 路径：
    11g：grid用户：$ORACLE_HOME/log/$HOSTNAME/crsd/crsdOUT.log (默认会保留10个历史记录，每个10M，文件名为 crsd.l01/02/03...)
    10g：grid用户：$ORA_CRS_HOME/log/$HOSTNAME/crsd/
 方法：
    清理历史crsd.l0*文件，保留crsdOUT.log和crsd.log
    其他同级目录agent/cssd/gipcd/mdnsd/ctssd/ohasd的清理方法与crsd目录类似

6 审计文件
 路径：
    （SQL> show parameter audit_file_dest查看）
 方法：
    清除7天以前的审计文件：find . -mtime +7 -name "*.aud" | xargs rm -rf

```

### 三、环境变量

#### 系统语言

```
[erlong@promote ~]$ls
AnacondaProjects         Downloads                OneDrive - ctrler        PycharmProjects?????????
Applications             Library                  Parallels                macIm
Applications (Parallels) Movies                   Pictures                 tmp
Desktop                  Music                    Public
Documents                OneDrive                 PycharmProjects
[erlong@promote ~]$locale
LANG=
LC_COLLATE="C"
LC_CTYPE="C"
LC_MESSAGES="C"
LC_MONETARY="C"
LC_NUMERIC="C"
LC_TIME="C"
LC_ALL=
[erlong@promote ~]$LANG=zh_CN.UTF-8
[erlong@promote ~]$export LANG
[erlong@promote ~]$ls
AnacondaProjects         Documents                Music                    Pictures                 macIm
Applications             Downloads                OneDrive                 Public                   tmp
Applications (Parallels) Library                  OneDrive - ctrler        PycharmProjects
Desktop                  Movies                   Parallels                PycharmProjects的替身

=======
localectl set-locale LANG=en_US.UTF-8
localectl list-locales 
echo $LANG

```

#### 别名

```bash
alias ..='cd ..'
alias ...='cd ...'
alias cd..='cd ..'
alias l='ll -h'
alias rm='rm -i'
alias yy='yum -y install'
alias yr='yum -y remove'
alias cdnet='cd /etc/sysconfig/network-scripts/'
alias cdrepo='cd /etc/yum.repos.d/'
PS1="\[\e[1;31m\][\u@\h \W]\\$\[\e[0m\]"
 
 
 
 
 export PS1="[\[\e[31;40m\]\u\[\e[37;40m\]@\[\e[34;40m\]\h\[\e[37;40m\] \W]\\\\$\[\e[0m"
```





### 四、常用命令

#### tcpdump

```
tcpdump -i eth0 -nn
tcpdump -i eth0 icmp
tcpdump -i eth0 tcp
tcpdump -i eth0 udp
```





#### getent

```
[root@master ~]#getent passwd ftp
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
```

#### psswd

```bash
[root@master ~]#echo 8888|passwd --stdin wll      
Changing password for user wll.
passwd: all authentication tokens updated successfully.		
```



#### chage

```
chage -M 99999 uniagent
```



#### chmod

```
chown a= p  无权限
```



#### vim

##### 4.1 替换



- 全局替换

```
:1,$s/替换字符/被替换字符/g
# 解释，从第一行替换到末尾，全部替换
```

- 替换单行

```
:s/替换字符/被替换字符/
```

- 替换全行的字符

```
:s/替换字符/被替换字符/g
```

##### 4.2环境配置

```
$vi ~/.vimrc
下面给出一个例子，其中列出了经常用到的设置，详细的设置信息请参照参考资料：
“双引号开始的行为注释行，下同
“去掉讨厌的有关vi一致性模式，避免以前版本的一些bug和局限
set nocompatible
“显示行号
set number
“检测文件的类型
 filetype on
“记录历史的行数
set history=1000
“背景使用黑色
set background=dark
“语法高亮度显示
syntax on
“下面两行在进行编写代码时，在格式对起上很有用；
“第一行，vim使用自动对起，也就是把当前行的对起格式应用到下一行；
“第二行，依据上面的对起格式，智能的选择对起方式，对于类似C语言编
“写上很有用
set autoindent
set smartindent
“第一行设置tab键为4个空格，第二行设置当行之间交错时使用4个空格
set tabstop=4
set shiftwidth=4
“设置匹配模式，类似当输入一个左括号时会匹配相应的那个右括号
set showmatch
“去除vim的GUI版本中的toolbar
set guioptions-=T
“当vim进行编辑时，如果命令错误，会发出一个响声，该设置去掉响声
set vb t_vb=
“在编辑过程中，在右下角显示光标位置的状态行
set ruler
“默认情况下，寻找匹配是高亮度显示的，该设置关闭高亮显示
set nohls
“查询时非常方便，如要查找book单词，当输入到/b时，会自动找到第一
“个b开头的单词，当输入到/bo时，会自动找到第一个bo开头的单词，依
“次类推，进行查找时，使用此设置会快速找到答案，当你找要匹配的单词
“时，别忘记回车
set incsearch
“修改一个文件后，自动进行备份，备份的文件名为原文件名加“~“后缀
```

```
if has(“vms”)
   set nobackup
else
   set backup
endif
```

如果去除注释后，一个完整的.vimrc配置信息如下所示：

复制代码代码如下:

```
set nummber   			s 		     		    
filetype on				s 		
set history=1000		s 				
set background=dark		s 				
syntax on				s 		
set autoindent			s 			
set smartindent			s 			
set tabstop=4			s 			
set shiftwidth=4		s 				
set showmatch			s 			
set guioptions-=T		s 				
set vb t_vb=			s 			
set ruler				s 		
set nohls				s 		
set incsearch			s 			 
if has(“vms”)
   set nobackup
else
   set backup
endif
```

```
vim +11 /etc/passwd         指定行打开
vim +/^wll /etc/passwd     	匹配模式打开
vim -d /etc/passwd epel.repo    打开多个
vim -m /etc/passwd      只读

命令模式
hjkl 方向
esc	 退出
i	 插入
a	 插入
o	 当前行上面插入一个空行
I 	 行首插入
A 	 行首插入
O    当前行下面插入一个空行
ctrl+d 		翻下页
ctrl+b 		翻上页

:
:wq
:q
:q!
:w f1 保存到另一个文件
:r f1 将f1 读入当前文件
ZZ 保存模式
ZQ 不保存退出、

dd 	 删除
pp 	 粘贴

# 不退出执行命令
:!ls
:r!hostname

:set number
:set nonumber
```



#### awk

##### substr 截取字符串

```bash
返回从起始位置起，指定长度之子字符串；若未指定长度，则返回从起始位置到字符串末尾的子字符串。
格式：
  substr(s,p) 返回字符串s中从p开始的后缀部分
  substr(s,p,n) 返回字符串s中从p开始长度为n的后缀部分
例子：
[root@test ~]# echo "123" | awk '{print substr($0,1,1)}'

解释：
awk -F ',' '{print substr($3,6)}'    --->  表示是从第3个字段里的第6个字符开始，一直到设定的分隔符","结束.
substr($3,10,8)  --->  表示是从第3个字段里的第10个字符开始，截取8个字符结束.
substr($3,6)     --->  表示是从第3个字段里的第6个字符开始，一直到结尾
substr($4,20)     --->  表示是从第4个字段里的第20个字符开始，一直到设定的分隔符","结束.
substr($3,6)     --->  表示是从第3个字段里的第6个字符开始，一直到设定的分隔.

eg:
[root@master httpd]#more test.log
F115!16201!1174113017250745 10.86.96.41 211.140.16.1 200703180718
F125!16202!1174113327151715 10.86.96.42 211.140.16.2 200703180728
F235!16203!1174113737250745 10.86.96.43 211.140.16.3 200703180738
F245!16204!1174113847250745 10.86.96.44 211.140.16.4 200703180748
F355!16205!1174115827252725 10.86.96.45 211.140.16.5 200703180758
[root@master httpd]#awk -F '[ !]' '{print substr($3,6)}' test.log 
13017250745
13327151715
13737250745
13847250745
15827252725

[root@master httpd]#awk -F '[!]' '{print substr($3,6)}' test.log  
13017250745 10.86.96.41 211.140.16.1 200703180718
13327151715 10.86.96.42 211.140.16.2 200703180728
13737250745 10.86.96.43 211.140.16.3 200703180738
13847250745 10.86.96.44 211.140.16.4 200703180748
15827252725 10.86.96.45 211.140.16.5 200703180758
[root@master httpd]#awk -F '[ !]' '{print substr($3,6)}' test.log 
13017250745
13327151715
13737250745
13847250745
15827252725

```



### 五、乱码

#### 5.1 环境变量乱码

- 永久

```bash
[erlong@promote ~]$vim .bash_profile
export LANG=en_US.UTF-8
# 添加上面一行
[erlong@promote ~]$source .bash_profile
```

- 临时

```bash
[erlong@promote ~]$LANG=en_US.UTF-8
[erlong@promote ~]$export LANG
```



### 七、数据库

#### 7.1 MariaDB

**权限**

- [点我](http://www.cnblogs.com/Richardzhu/p/3318595.html)
- 备份

```bash
mysqldump
格式：mysqldump -h主机名  -P端口 -u用户名 -p密码 --database 数据库名 > 文件名.sql 
格式：mysqldump -h主机名  -P端口 -u用户名 -p密码 --all-database 数据库名 > 文件名.sql 



-- 刷新
flush privileges;


grant all privileges on *.* to root@'%' identified by "8888" with grant option;
grant all privileges on *.* to root@'%' identified by "8888" ;


```



##### 测试数据 	

- `https://github.com/datacharmer/test_db`

##### Select

##### Update

##### GRANT

##### insert

```
 insert into students1 (id,name,age,sex) select '4','xixixi1','18','m' from DUAL where not exists (select id from students1 where id=22);
```



#### 7.2 Oracle

##### 查询

##### 更新字段

##### 权限

- 允许root远程登陆

```
#mysql -uroot -p123456

>use mysql;
>select host,user,password from user;
>create user 'root'@'%' identified by '123456';
>grant all on *.* to root@'%' identified by '123456';
>exit
```

##### 密码过期

```
按照如下步骤进行操作：
1、查看用户的proifle是哪个，一般是default：
sql>SELECT username,PROFILE FROM dba_users;
2、查看指定概要文件（如default）的密码有效期设置：
sql>SELECT * FROM dba_profiles s WHERE s.profile='DEFAULT' AND resource_name='PASSWORD_LIFE_TIME';
3、将密码有效期由默认的180天修改成"无限制"：
sql>ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME UNLIMITED;
修改之后不需要重启动数据库，会立即生效。
4、修改后，还没有被提示ORA-28002警告的帐户不会再碰到同样的提示；
   已经被提示的帐户必须再改一次密码，举例如下：
   $sqlplus / as sysdba
    sql> alter user smsc identified by <原来的密码> ----不用换新密码
oracle11g启动参数resource_limit无论设置为false还是true，密码有效期都是生效的，所以必须通过以上方式进行修改。以上的帐户名请根据实际使用的帐户名更改。
```

#### 常用命令

```
关于归档日志：https://jingyan.baidu.com/article/f71d6037ccf1301ab641d1f0.html
sys用户在cmd下以DBA身份登陆：
sqlplus /nolog
sqlplus / as sysdba
archive log list
rman target /
delete archivelog all
delete archivelog until time 'sysdate-7'
	其中sysdate-7代表保留近七天的归档日志，如需保留近十天的，则需将sysdate-7修改为sysdate-10即可。
```



### 八、Python额外模块路径

#### 安装pip

```
# 需要管理员权限
wget https://bootstrap.pypa.io/get-pip.py
python get-pip.py
pip -V　　#查看pip版本
```



#### 8.1 PIP安装模块方法



#### 8.2 统一安装方法

- 下载源代码包

- 阅读README

- 按照步骤安装

- 如果报错，可能需依赖包，自行搜索安装

	```
	yum -y install zlib-devel readline-devel libffi-devel python-devel openssl-devel  gcc git python-devel
	```

#### 8.3 paramiko模块

- [项目主页](https://github.com/paramiko/paramiko)

```
yum -y install zlib-devel readline-devel libffi-devel python-devel openssl-devel  gcc git
wget http://ftp.dlitz.net/pub/dlitz/crypto/pycrypto/pycrypto-2.6.tar.gz
git clone https://github.com/paramiko/paramiko.git  
tar zxf pycrypto-2.6.tar.gz
cd ./pycrypto-2.6
python setup.py 
python setup.py install
cd ..
cd paramiko
python setup.py build
python setup.py install
```



#### 8.4 RabbitMQ

- Mac安装：`https://www.cnblogs.com/uptothesky/p/6094357.html`
- Centos安装：`https://blog.csdn.net/kuanxiangqi0897/article/details/79483985`



### 九、其他

#### 远程root不允许登陆

```
vim /etc/ssh/sshd_config
#PermitRootLogin yes
```

13482155713

#### 开机自动登录root用户

```bash
修改/etc/gdm/custom.conf 文件  ---记得备份文件
修改[daemon]选项
AutomaticLoginEnable=true
AutomaticLogin=root
TimedLoginEnable=true
修改[security]
AllowRoot=true
```

#### 禁用图形列表的用户列表

```bash
# 注意，修改系统级别配置的时候最好做好快照以便恢复
如果设置了自动登陆的话，就先取消自动登录
vim /etc/gdm/custom.conf 文件  ---记得备份文件
[daemon]
# AutomaticLoginEable=ture
# AutomaticLogin=root
# TimedLoginEnable=true
# 注释上面的

vim /etc/gconf/gconf.xml.defaults/%gconf-tree.xml
查找 disable_user,大概650多行左右
<entry name="disable_user_switching" mtime="1515459981" type="schem     a" stype="bool" owner="gnome">
                                                 <local_schema locale="C" short_desc="Disable user switching     ">
                                                         <default type="bool" value="false"/>
                                                         <longdesc>
# 把fales改为true

<entry name="disable_user_switching" mtime="1515459981" type="schem     a" stype="bool" owner="gnome">
                                                 <local_schema locale="C" short_desc="Disable user switching     ">
                                                         <default type="bool" value="true"/>
                                                         <longdesc>
```

#### 升级linux内核

```

```



### 十、Python

```
\033[41;1mred lighting is on .....\033[0m
#-*-coding:utf-8 -*-


attribute
if __name__  =='__main__':  
	print（“xxx”）

这句话的意思的区别是否把这个脚本当作一个模块去调用，
如果别人导入调用你的脚本，那么这下面的就不执行
如果自己来执行这个脚本那么，这句话下面的代码就执行
```

### 十一、头大怎么治

- **问题**：目前存在的问题是学的东西太多找不到重点，get不到要点，问问题的时候能想起来大概回答不出来，头就很大。
- **需求**：快速get和学会东西



- 要求

	- 看东西全看两遍
		- 第一遍知道大概，第二遍抽重点，第三遍的话就看心情和精力还有是否要继续深入研究
	- 以此为戒（2018-08-01）

	### 十二、没事敲敲的命令

```
systemctl set-default multi-user.target 
systemctl set-default graphical.target



```



### 十三、服务

#### Nginx

```bash
# 虚拟主机设置
server{
        listen 81;
        root   /usr/share/nginx/html/phpadmin/;
        index  index.php index.html index.htm;

        location ~ \.php$ {
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_split_path_info  ^((?U).+\.php)(/?.+)$;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/html/phpadmin$fastcgi_script_name;
            fastcgi_param  PATH_INFO  $fastcgi_path_info;
            fastcgi_param  PATH_TRANSLATED  $document_root$fastcgi_path_info;
            include        fastcgi_params;
        }
# 注意权限，以及日志报错的情况排查错误
```

##### 开启php





#### Httpd

##### 虚拟机

```bash
vim /etc/httpd/conf.d/virtualhost.conf   
<VirtualHost *:80>
        ServerName  www.82ndlf.com						# 名称
        DocumentRoot  "/var/www/html/blog/" 			# 定义站点路径
        redirect temp / https://www.82ndlf.com/ 		# 重定向到https
        <Directory "/var/www/html/blog/">				# 设置权限
                Options None
                AllowOverride  None
                Require all granted
        </Directory>
</VirtualHost>
```

##### https

```bash
Listen 443 https
SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog
SSLSessionCache         shmcb:/run/httpd/sslcache(512000)
SSLSessionCacheTimeout  300
SSLRandomSeed startup file:/dev/urandom  256
SSLRandomSeed connect builtin
SSLCryptoDevice builtin
<VirtualHost _default_:443>
DocumentRoot "/var/www/html/blog"
ServerName www.82ndlf.com:443
ErrorLog logs/ssl_error_log
TransferLog logs/ssl_access_log
LogLevel warn
SSLEngine on
SSLProtocol all -SSLv2 -SSLv3
SSLCipherSuite HIGH:3DES:!aNULL:!MD5:!SEED:!IDEA
SSLCertificateFile /etc/httpd/ssl/2_www.82ndlf.com.crt
SSLCertificateKeyFile /etc/httpd/ssl/3_www.82ndlf.com.key
SSLCertificateChainFile /etc/httpd/ssl/1_root_bundle.crt
<Files ~ "\.(cgi|shtml|phtml|php3?)$">
    SSLOptions +StdEnvVars
</Files>
<Directory "/var/www/cgi-bin">
    SSLOptions +StdEnvVars
</Directory>
BrowserMatch "MSIE [2-5]" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0
CustomLog logs/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
</VirtualHost>            
```



##### 开启php

快速开启

```bash
yum -y install php
systemctl restart  httpd
# 安装php之后就可以使用php
```







### 十四、命令

#### date

```
date +"%F %T"
2018-11-06 13:55:38
 +%F日历   +%T时间（几点几分） +%Y年  +%m月份  +%d日  +%H时  +%M分  +%s秒  +%S(从1970年计算的秒数)



```



#### openssl

```
生成随机数：
openssl rand -hex 10
```









#### ntpdate

```
ntpdate -u 133.100.11.8 				//同步到日本的服务器时间
ntpdate -u ntp.api.bz					 //直接用域名同步中国上海时间
ntpdate -u 17.253.68.253 					//中国上海时间同步服务器IP
```

#### history

```
[root@centos7 ~]#HISTTIMEFORMAT="%F %T "---加时间
[root@centos7 ~]#HISTIGNORE="ll*"---忽略以ll开头的命令
[root@centos7 ~]#HISTCONTROL=ignoreboth---忽略重复和以空白开头的命令


```





#### watch

```
watch -n1 ss -ntl
```



#### 解压/压缩 命令

```bash
解压/压缩 命令
unzip
压　缩：tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称
查　询：tar -jtv -f filename.tar.bz2
解压缩：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录

tar -zxvf 
	- x 解压
	- c 创建新文件
	- v 显示过程
	- f 指定备份文件

tar -cvf log.tar log2012.log  	   仅打包，不压缩！ 
tar -zcvf log.tar.gz log2012.log   打包后，以 gzip 压缩 
tar -jcvf log.tar.bz2 log2012.log  打包后，以 bzip2 压缩 

压　缩：tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称
查　询：tar -jtv -f filename.tar.bz2
解压缩：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录

备份文件夹内容是排除部分文件：
tar --exclude scf/service -zcvf scf.tar.gz scf/*

zcat 
zgrep

tar -zcvf script.tar.gz home ---打包压缩成gzip格式
tar -jcf script.tar.bz home/ ---打包压缩成bzip2格式
tar -Jcf script.tar.xz home/ ---打包压缩成xz格式
tar -xf script.tar.gz   ---解包
 tar -jcvf list.tar.bz -T list.txt   ---调用要打包压缩的文件列表，如果有很多文件要打包压缩，可以用这种方法。list.txt里面列了很多文件


```



### 十五、mage群分享

#### 1、快速构建ceph可视化监控系统

- [点我](https://ceph.com/planet/%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BAceph%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/)

#### 2、Prometheus

- [点我](https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/quickstart/prometheus-quick-start)







### 十六、小技巧

##### root自动登录

```
[root@node1-python ~]#cat /etc/gdm/custom.conf
# GDM configuration storage

[daemon]
AutomaticLoginEnable=true
AutomaticLogin=root 

[security]
wuerlong
```

### 十七、所有命令

```
init 3 zifu 
init 6 tuixng 
runlevel
who -r 

ctrl+d = logout quit exit
ctrl+l = clear

[root@node1-python ~]#vim /etc/profile.d/env.sh
[root@node1-python ~]#cat /etc/profile.d/env.sh
export PS1="\[\e[33m\][\u@\h \w]\\$\[\e[0m\]"
[root@node1-python ~]#. /etc/profile.d/env.sh  


# 登陆后显示 欢迎信息
welcome to erlong.com
[root@node1-python ~]#vim /etc/motd 

# 登陆显示信息脚本存档位置
[root@node1 ~]$vim /etc/profile.d/kaiji.sh


```

#### route

```
route -n
route del -net xxx.xxx.xxx.xxx gw xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx
route add -net xxx.xxx.xxx.xxx gw xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx
route add -net 0.0.0.0 gw 10.211.55.1 netmask 0.0.0.0

```

#### find

```
find ./ -type f -regex ".*\.\w+$" | sed -r -n 's#(.*\.)(.*)$#mv & \1log#e'
(.*\.)(.*)$   查找模式
mv & \1log   执行命令替换
```



# 十八、Mac 相关

## 搭建apache和ftp

- 一、原因
	- 有时候在学习或者工作的时候需要一个web或者ftp服务器，而mac本身就携带web和ftp服务器的功能
- 二、WEB服务器搭建
	- 1）开启命令：sudo apachectl start /restart
	- 2) 关闭命令：sudo apachectl stop
	- 3)服务器默认页面路径：/Libiary/WebServer/Documents
	- 4)服务器配置文件：/etc/apache2/httpd.conf  
		- 可修改端口
		- 定义DocumentRoot，服务器根路径，
		- 定义DirectoryIndex，默认文件，另外还有错误日志文件等
	- 5)查看apache版本：sudo apachectl -v
- 三、FTP服务器
	- 1）开启命令：sudo -s launchctl load -w /System/Library/LaunchDaemons/ftp.plist
	- 2) 关闭命令：sudo -s launchctl unload -w /System/Library/LaunchDaemons/ftp.plist

```
设置开机自启：编辑ftp.plist文件
<dict>
<key>Disable</key> //修改为Enabled
```



# 十九、bug软件集合

## 1、WeChatTweak

- 让 Mac 微信支持多开
- [点我git](https://github.com/Sunnyyoung/WeChatTweak-macOS)
- [点我blog](https://lai.yuweining.cn/archives/1466/)

### 2、dzzoffice

- 协同办公软件



# 二十、各种链接

##### 1、[原]红帽 Red Hat Linux相关产品iso镜像下载【百度云】【更新6.10】

- [点我](http://www.linuxfly.org/post/659)











# 二十一、各种问题的链接

1、[apache 的网页内容显示是乱码](https://blog.csdn.net/newman0708/article/details/2841297)





# 二十二、各种服务

#### 邮件服务器搭建





#### web服务器搭建

##### lamp



##### lnmp



##### docker

```
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://04zlo3pl.mirror.aliyuncs.com"]
}
EOF
```



#### git

```bash
# 自定义Git
git config --global color.ui true
git config --global alias.st status 
git config --global alias.co checkout
git config --global alias.ci commit
git config --global alias.br branch
git config --global alias.last 'log -1'
git config --global alias.unstage 'reset HEAD'
git config --global alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"


git init
git config --global user.name "sandengjiubanv"
git config --global user.email "1611269762@qq.com"
git add [filename]
git commit -m "discurbe"
git status
git diff [filename]
git last
git log
git log --pretty=oneline
git reset --hard HEAD^
git reset --hard HEAD~100
git reset --hard 1094a
git reflog
git clone


git remote rm origin     # 删除远程 Git 仓库
git push -u origin master

# 查看分支：
git branch

# 创建分支：
git branch <name>

# 切换分支：
git checkout <name>

# 创建+切换分支：
git checkout -b <name>

# 合并某分支到当前分支：
git merge <name>

# 删除分支：
git branch -d <name>


# 查看分支合并图
git log --graph
git log --graph --pretty=oneline --abbrev-commit
```





# 二十三、墙外



1、安装ssr linux客户端

```
https://blog.csdn.net/Taneemy/article/details/80335345
```

2、下载youtube视频

```
答：使用强大的youtube-dl吧，项目源码：https://github.com/rg3/youtube-dl

安装 youtube-dl：

pip install --upgrade youtube_dl
使用方法：

# https://www.youtube.com/watch?v=nNGmruHS3r8 => 需要下载的视频URL
# 执行下列命令缓存到当前目录
youtube-dl https://www.youtube.com/watch?v=nNGmruHS3r8
离线取回：

# 利用 python 即可快速创建一个临时 WEB 服务，当其他 Node 的 http-sever 也可以的。
python -m SimpleHTTPServer 8080
现在要下载一个视频 MP3 轨道，我们需要以下两个选项：

–extract-audio （短选项-x） -视频文件转换为纯音频文件。
–audio-format -指定音频格式，其中该文件将被下载。 支持的音频格式是“最佳”，“aac”，“vorbis”，“mp3”，“m4a”，“opus”或“wav” “best”默认设置
要将视频下载为mp3文件，可以使用以下命令之一：

youtube-dl -x --audio-format mp3 https://www.youtube.com/watch?v=jwD4AEVBL6Q
那么如果我们已经下载了视频格式，结果还想要音频MP3呢？
答：可以使用 ffmpeg 格式转换工具

# 以下命令可以将 123.mp4 文件转换成 123.mp3 文件
ffmpeg -i 123.mp4 123.mp3



```



3、linux主机翻墙

```bash
yum -y install python-pip
pip install --upgrade pip
pip install shadowsocks
cat > /etc/shadowsocks.json << EOF
{
"server":"144.172.116.116",
"server_port":10086,
"local_port":1080,
"password":"erlong10086",
"timeout":600,
"method":"aes-256-cfb"
}
EOF

sslocal -c /etc/shadowsocks.json -d restart
setssr
curl --socks5 127.0.0.1:1080 ip.gs
# 取消翻墙 unsetssr
```

- [让终端走代理的几种方法](https://blog.fazero.me/2015/09/15/%E8%AE%A9%E7%BB%88%E7%AB%AF%E8%B5%B0%E4%BB%A3%E7%90%86%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/)



```
CentOS下shadowsock服务端搭建及客户端全局http代理的实现
1. 服务端：

cat > /etc/profile.d/privoxy.sh << EOF
export http_proxy=http://127.0.0.1:8118
export https_proxy=http://127.0.0.1:8118
EOF




```



### [CentOS下shadowsock服务端搭建及客户端全局http代理的实现

### 基本操作

![图二](http://wx4.sinaimg.cn/large/b1630646gy1fttwsj7xrzj20j605et9c.jpg)

### 一、yum源

- 有时候下载的yum并不如意，这是我用的

  ```
  
  cd /etc/yum.repos.sd/
  
  rm -rf *
  
  cat >epel.repo << EOF
  [epel]
  name=epel
  baseurl=https://mirrors.aliyun.com/epel/7/x86_64/
  gpgcheck=1
  gpgkey=https://mirrors.aliyun.com/epel/RPM-GPG-KEY-EPEL-7
  enabled=1
  EOF
  
  cat >centos7.repo << EOF
  [centos]
  name=centos-7
  baseurl=https://mirrors.aliyun.com/centos/7/os/x86_64/
  gpgkey=https://mirrors.aliyun.com/centos/7/os/x86_64/RPM-GPG-KEY-CentOS-7
  gpgcheck=1
  enabled=1
  EOF
  
  cat >extras.repo << EOF
  [Extras]
  name= extras
  baseurl=https://mirrors.aliyun.com/centos/7/extras/x86_64
  enabled=1
  gpgcheck=0
  EOF
  
  cat >gitlab.repo << EOF
  [gitlab-ce]
  name=gitlab-ce
  baseurl=http://mirrors.tuna.tsinghua.edu.cn/gitlab-ce/yum/el7
  repo_gpgcheck=0
  gpgcheck=0
  enabled=0
  gpgkey=https://packages.gitlab.com/gpg.key
  EOF
  
  yum makecache
  
  cd ~
  cat >> .bashrc << EOF 
  alias ..='cd ..'
  alias ...='cd ...'
  alias cd..='cd ..'
  alias l='ll -h'
  alias rm='rm -i'
  alias yy='yum -y install'
  alias yr='yum -y remove'
  alias cdn='cd /etc/sysconfig/network-scripts/'
  alias cdrepo='cd /etc/yum.repos.d/'
  PS1="\[\e[1;31m\][\u@\h \W]\\$\[\e[0m\]"
  alias pw='ping www.baidu.com'
  alias p8='ping 8.8.8.8'
  alias pg='ping www.google.com'
  alias setssr='export ALL_PROXY=socks5://127.0.0.1:1080'
  alias unsetssr='unset ALL_PROXY'
  EOF
  
  source .bashrc
  
  # vim
  cd ~
  cat >> .vimrc << EOF
  set number
  set syntax=on
  set paste
  set history=3000	
  set background=dark			
  set autoindent		
  set smartindent		
  set tabstop=4		
  set shiftwidth=4	
  set showmatch		
  set guioptions-=T	
  set vb t_vb=		
  set ruler			
  set nohls			
  set incsearch		
  EOF
  
  source ~/.vimrc
  
  cat > /etc/motd <<EOF
  欢迎登陆 Red Hat Enterprise Linux ~
  EOF
  
  
  #╭﹌☆﹌﹌﹌☆﹌╮　
  #∣　　　　　　∣
  #∣　●　　　●  ∣　
  #∣　　　▽　 　∣
  #╰————— -   -—╯　
  #　∣﹏　﹏∣　　
  #　╰∪———∪╯
  
  
  # iptables
  iptables -F && systemctl stop iptables.service && systemctl disable iptables.service && iptables -vnL
  
  # SElinux
  sed -i '/SELINUX/s/enforcing/disabled/' /etc/selinux/config
  getenforce
  
  # tools
  yy tree
  yy lrzsz
  yy net-tools
  # yy openssl
  
  systemctl set-default multi-user.target  
  
  
  
  reboot
  
  
  
  
  ```

### 二、日志

#### Oracle

```
oracle各类日志清理(一般oracle软件目录约10G左右)

一般先进$ORACLE_BASE目录，查看哪个目录占用较大空间，并层层深入，定位到占用较大的目录，判断文件类型并清理。如下：
[oracle@test-for-lihb ~]$ cat /etc/redhat-release 
Red Hat Enterprise Linux Server release 6.4 (Santiago)
[oracle@test-for-lihb ~]$ cd $ORACLE_BASE
[oracle@test-for-lihb /opt/app/oracle]$ du -sm *|sort -n
1	admin
1	afiedt.buf
1	checkpoints
3	cfgtoollogs
10	flash_recovery_area
1377	diag
8501	product


1 归档文件
 路径：
    （SQL> archive log list  由Archive destination获取归档路径）
 方法：
    通过rman删除归档文件
    [oracle@test-for-lihb ~]$ rman target /
    RMAN> delete archivelog all completed before 'sysdate-1'; （“1”对应是一天，若想删除6小时前的归档日志，则改为0.25）
    删除完归档，若有对应的备份策略需要重新启动全备。

2 alert告警日志文件
 路径：
    /alert_.log (由SQL> show parameter background_dump_dest/core_dump_dest/user_dump_dest获取日志文件位置)
 方法：
    1）将alert_.log清空 >alert_.log  (建议：tail -100000 alert_.log > alert_.log_bak20170601，保留10w行数据再删除)
    2）系统会自动生成新的alert_.log
    3）find . -mtime +30 -name "*.trc/trm" | wc -l 查看一个月之前的trc/trm文件数量
    4）find . -mtime +30 -name "*.trc/trm" | xargs rm -rf  删除一个月之前的trc/trm文件

3 监听日志文件
 路径：
    $ORACLE_HOME/network/log/listener.log (由$ lsnrctl status $监听名 中的Listener Log File 获取日志文件位置)
 若是log文件
    方法一：
        1）lsnrctl set log_status off
        2）将listener.log  删除或者移走(建议：tail -100000 listener.log > listener.log_bak20170601，保留10w行数据再删除)
        3）lsnrctl set log_status on此时系统重新生成listener.log 
    方法二：
        1）直接清空log文件：>listener.log (建议：tail -100000 listener.log > listener.log_bak20170601，保留10w行数据再删除)
 若是xml文件
    方法：
        保留log.xml，其他可以删除，比如：find . -mtime +30 -name "log_*.xml" | xargs rm -rf 
        同时，可清理同级trace目录的log文件：
        cd ../trace
        tail -100000 listener.log > listener.log_bak20170601
        >listener.log

4 OEM日志文件
 路径：
    $ORACLE_HOME/oc4j/j2ee/OC4J_DBConsole__/log/http-web-access.log或em-application.log
 方法：
    查看OEM状态：$ emctl status dbconsole
    若没有运行，则
    直接把http-web-access.log/em-application.log挪走或删除。
    若正在运行，则
    停止dbconsole（emctl stop dbconsole），
    将http-web-access.log/em-application.log挪走或删除，
    重新启动dbconsole(emctl start dbconsole),
    检查oem状态(emctl start dbconsole)。

5 CRS日志文件
 路径：
    11g：grid用户：$ORACLE_HOME/log/$HOSTNAME/crsd/crsdOUT.log (默认会保留10个历史记录，每个10M，文件名为 crsd.l01/02/03...)
    10g：grid用户：$ORA_CRS_HOME/log/$HOSTNAME/crsd/
 方法：
    清理历史crsd.l0*文件，保留crsdOUT.log和crsd.log
    其他同级目录agent/cssd/gipcd/mdnsd/ctssd/ohasd的清理方法与crsd目录类似

6 审计文件
 路径：
    （SQL> show parameter audit_file_dest查看）
 方法：
    清除7天以前的审计文件：find . -mtime +7 -name "*.aud" | xargs rm -rf

```

### 三、环境变量

#### 系统语言

```
[erlong@promote ~]$ls
AnacondaProjects         Downloads                OneDrive - ctrler        PycharmProjects?????????
Applications             Library                  Parallels                macIm
Applications (Parallels) Movies                   Pictures                 tmp
Desktop                  Music                    Public
Documents                OneDrive                 PycharmProjects
[erlong@promote ~]$locale
LANG=
LC_COLLATE="C"
LC_CTYPE="C"
LC_MESSAGES="C"
LC_MONETARY="C"
LC_NUMERIC="C"
LC_TIME="C"
LC_ALL=
[erlong@promote ~]$LANG=zh_CN.UTF-8
[erlong@promote ~]$export LANG
[erlong@promote ~]$ls
AnacondaProjects         Documents                Music                    Pictures                 macIm
Applications             Downloads                OneDrive                 Public                   tmp
Applications (Parallels) Library                  OneDrive - ctrler        PycharmProjects
Desktop                  Movies                   Parallels                PycharmProjects的替身

=======
localectl set-locale LANG=en_US.UTF-8
localectl list-locales 
echo $LANG

```

#### 别名

```bash
alias ..='cd ..'
alias ...='cd ...'
alias cd..='cd ..'
alias l='ll -h'
alias rm='rm -i'
alias yy='yum -y install'
alias yr='yum -y remove'
alias cdnet='cd /etc/sysconfig/network-scripts/'
alias cdrepo='cd /etc/yum.repos.d/'
PS1="\[\e[1;31m\][\u@\h \W]\\$\[\e[0m\]"
 
 
 
 
 export PS1="[\[\e[31;40m\]\u\[\e[37;40m\]@\[\e[34;40m\]\h\[\e[37;40m\] \W]\\\\$\[\e[0m"
```





### 四、常用命令

#### tcpdump

```
tcpdump -i eth0 -nn
tcpdump -i eth0 icmp
tcpdump -i eth0 tcp
tcpdump -i eth0 udp
```





#### getent

```
[root@master ~]#getent passwd ftp
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
```

#### psswd

```bash
[root@master ~]#echo 8888|passwd --stdin wll      
Changing password for user wll.
passwd: all authentication tokens updated successfully.		
```



#### chage

```
chage -M 99999 uniagent
```



#### chmod

```
chown a= p  无权限
```



#### vim

##### 4.1 替换



- 全局替换

```
:1,$s/替换字符/被替换字符/g
# 解释，从第一行替换到末尾，全部替换
```

- 替换单行

```
:s/替换字符/被替换字符/
```

- 替换全行的字符

```
:s/替换字符/被替换字符/g
```

##### 4.2环境配置

```
$vi ~/.vimrc
下面给出一个例子，其中列出了经常用到的设置，详细的设置信息请参照参考资料：
“双引号开始的行为注释行，下同
“去掉讨厌的有关vi一致性模式，避免以前版本的一些bug和局限
set nocompatible
“显示行号
set number
“检测文件的类型
 filetype on
“记录历史的行数
set history=1000
“背景使用黑色
set background=dark
“语法高亮度显示
syntax on
“下面两行在进行编写代码时，在格式对起上很有用；
“第一行，vim使用自动对起，也就是把当前行的对起格式应用到下一行；
“第二行，依据上面的对起格式，智能的选择对起方式，对于类似C语言编
“写上很有用
set autoindent
set smartindent
“第一行设置tab键为4个空格，第二行设置当行之间交错时使用4个空格
set tabstop=4
set shiftwidth=4
“设置匹配模式，类似当输入一个左括号时会匹配相应的那个右括号
set showmatch
“去除vim的GUI版本中的toolbar
set guioptions-=T
“当vim进行编辑时，如果命令错误，会发出一个响声，该设置去掉响声
set vb t_vb=
“在编辑过程中，在右下角显示光标位置的状态行
set ruler
“默认情况下，寻找匹配是高亮度显示的，该设置关闭高亮显示
set nohls
“查询时非常方便，如要查找book单词，当输入到/b时，会自动找到第一
“个b开头的单词，当输入到/bo时，会自动找到第一个bo开头的单词，依
“次类推，进行查找时，使用此设置会快速找到答案，当你找要匹配的单词
“时，别忘记回车
set incsearch
“修改一个文件后，自动进行备份，备份的文件名为原文件名加“~“后缀
```

```
if has(“vms”)
   set nobackup
else
   set backup
endif
```

如果去除注释后，一个完整的.vimrc配置信息如下所示：

复制代码代码如下:

```
set nummber   			s 		     		    
filetype on				s 		
set history=1000		s 				
set background=dark		s 				
syntax on				s 		
set autoindent			s 			
set smartindent			s 			
set tabstop=4			s 			
set shiftwidth=4		s 				
set showmatch			s 			
set guioptions-=T		s 				
set vb t_vb=			s 			
set ruler				s 		
set nohls				s 		
set incsearch			s 			 
if has(“vms”)
   set nobackup
else
   set backup
endif
```

```
vim +11 /etc/passwd         指定行打开
vim +/^wll /etc/passwd     	匹配模式打开
vim -d /etc/passwd epel.repo    打开多个
vim -m /etc/passwd      只读

命令模式
hjkl 方向
esc	 退出
i	 插入
a	 插入
o	 当前行上面插入一个空行
I 	 行首插入
A 	 行首插入
O    当前行下面插入一个空行
ctrl+d 		翻下页
ctrl+b 		翻上页

:
:wq
:q
:q!
:w f1 保存到另一个文件
:r f1 将f1 读入当前文件
ZZ 保存模式
ZQ 不保存退出、

dd 	 删除
pp 	 粘贴

# 不退出执行命令
:!ls
:r!hostname

:set number
:set nonumber
```



#### awk

##### substr 截取字符串

```bash
返回从起始位置起，指定长度之子字符串；若未指定长度，则返回从起始位置到字符串末尾的子字符串。
格式：
  substr(s,p) 返回字符串s中从p开始的后缀部分
  substr(s,p,n) 返回字符串s中从p开始长度为n的后缀部分
例子：
[root@test ~]# echo "123" | awk '{print substr($0,1,1)}'

解释：
awk -F ',' '{print substr($3,6)}'    --->  表示是从第3个字段里的第6个字符开始，一直到设定的分隔符","结束.
substr($3,10,8)  --->  表示是从第3个字段里的第10个字符开始，截取8个字符结束.
substr($3,6)     --->  表示是从第3个字段里的第6个字符开始，一直到结尾
substr($4,20)     --->  表示是从第4个字段里的第20个字符开始，一直到设定的分隔符","结束.
substr($3,6)     --->  表示是从第3个字段里的第6个字符开始，一直到设定的分隔.

eg:
[root@master httpd]#more test.log
F115!16201!1174113017250745 10.86.96.41 211.140.16.1 200703180718
F125!16202!1174113327151715 10.86.96.42 211.140.16.2 200703180728
F235!16203!1174113737250745 10.86.96.43 211.140.16.3 200703180738
F245!16204!1174113847250745 10.86.96.44 211.140.16.4 200703180748
F355!16205!1174115827252725 10.86.96.45 211.140.16.5 200703180758
[root@master httpd]#awk -F '[ !]' '{print substr($3,6)}' test.log 
13017250745
13327151715
13737250745
13847250745
15827252725

[root@master httpd]#awk -F '[!]' '{print substr($3,6)}' test.log  
13017250745 10.86.96.41 211.140.16.1 200703180718
13327151715 10.86.96.42 211.140.16.2 200703180728
13737250745 10.86.96.43 211.140.16.3 200703180738
13847250745 10.86.96.44 211.140.16.4 200703180748
15827252725 10.86.96.45 211.140.16.5 200703180758
[root@master httpd]#awk -F '[ !]' '{print substr($3,6)}' test.log 
13017250745
13327151715
13737250745
13847250745
15827252725

```



### 五、乱码

#### 5.1 环境变量乱码

- 永久

```bash
[erlong@promote ~]$vim .bash_profile
export LANG=en_US.UTF-8
# 添加上面一行
[erlong@promote ~]$source .bash_profile
```

- 临时

```bash
[erlong@promote ~]$LANG=en_US.UTF-8
[erlong@promote ~]$export LANG
```



### 七、数据库

#### 7.1 MariaDB

**权限**

- [点我](http://www.cnblogs.com/Richardzhu/p/3318595.html)
- 备份

```bash
mysqldump
格式：mysqldump -h主机名  -P端口 -u用户名 -p密码 --database 数据库名 > 文件名.sql 
格式：mysqldump -h主机名  -P端口 -u用户名 -p密码 --all-database 数据库名 > 文件名.sql 



-- 刷新
flush privileges;


grant all privileges on *.* to root@'%' identified by "8888" with grant option;
grant all privileges on *.* to root@'%' identified by "8888" ;


```



##### 测试数据 	

- `https://github.com/datacharmer/test_db`

##### Select

##### Update

##### GRANT

##### insert

```
 insert into students1 (id,name,age,sex) select '4','xixixi1','18','m' from DUAL where not exists (select id from students1 where id=22);
```



#### 7.2 Oracle

##### 查询

##### 更新字段

##### 权限

- 允许root远程登陆

```
#mysql -uroot -p123456

>use mysql;
>select host,user,password from user;
>create user 'root'@'%' identified by '123456';
>grant all on *.* to root@'%' identified by '123456';
>exit
```

##### 密码过期

```
按照如下步骤进行操作：
1、查看用户的proifle是哪个，一般是default：
sql>SELECT username,PROFILE FROM dba_users;
2、查看指定概要文件（如default）的密码有效期设置：
sql>SELECT * FROM dba_profiles s WHERE s.profile='DEFAULT' AND resource_name='PASSWORD_LIFE_TIME';
3、将密码有效期由默认的180天修改成"无限制"：
sql>ALTER PROFILE DEFAULT LIMIT PASSWORD_LIFE_TIME UNLIMITED;
修改之后不需要重启动数据库，会立即生效。
4、修改后，还没有被提示ORA-28002警告的帐户不会再碰到同样的提示；
   已经被提示的帐户必须再改一次密码，举例如下：
   $sqlplus / as sysdba
    sql> alter user smsc identified by <原来的密码> ----不用换新密码
oracle11g启动参数resource_limit无论设置为false还是true，密码有效期都是生效的，所以必须通过以上方式进行修改。以上的帐户名请根据实际使用的帐户名更改。
```

#### 常用命令

```
关于归档日志：https://jingyan.baidu.com/article/f71d6037ccf1301ab641d1f0.html
sys用户在cmd下以DBA身份登陆：
sqlplus /nolog
sqlplus / as sysdba
archive log list
rman target /
delete archivelog all
delete archivelog until time 'sysdate-7'
	其中sysdate-7代表保留近七天的归档日志，如需保留近十天的，则需将sysdate-7修改为sysdate-10即可。
```



### 八、Python额外模块路径

#### 安装pip

```
# 需要管理员权限
wget https://bootstrap.pypa.io/get-pip.py
python get-pip.py
pip -V　　#查看pip版本
```



#### 8.1 PIP安装模块方法



#### 8.2 统一安装方法

- 下载源代码包

- 阅读README

- 按照步骤安装

- 如果报错，可能需依赖包，自行搜索安装

  ```
  yum -y install zlib-devel readline-devel libffi-devel python-devel openssl-devel  gcc git python-devel
  ```

#### 8.3 paramiko模块

- [项目主页](https://github.com/paramiko/paramiko)

```
yum -y install zlib-devel readline-devel libffi-devel python-devel openssl-devel  gcc git
wget http://ftp.dlitz.net/pub/dlitz/crypto/pycrypto/pycrypto-2.6.tar.gz
git clone https://github.com/paramiko/paramiko.git  
tar zxf pycrypto-2.6.tar.gz
cd ./pycrypto-2.6
python setup.py 
python setup.py install
cd ..
cd paramiko
python setup.py build
python setup.py install
```



#### 8.4 RabbitMQ

- Mac安装：`https://www.cnblogs.com/uptothesky/p/6094357.html`
- Centos安装：`https://blog.csdn.net/kuanxiangqi0897/article/details/79483985`



### 九、其他

#### 远程root不允许登陆

```
vim /etc/ssh/sshd_config
#PermitRootLogin yes
```

13482155713

#### 开机自动登录root用户

```bash
修改/etc/gdm/custom.conf 文件  ---记得备份文件
修改[daemon]选项
AutomaticLoginEnable=true
AutomaticLogin=root
TimedLoginEnable=true
修改[security]
AllowRoot=true
```

#### 禁用图形列表的用户列表

```bash
# 注意，修改系统级别配置的时候最好做好快照以便恢复
如果设置了自动登陆的话，就先取消自动登录
vim /etc/gdm/custom.conf 文件  ---记得备份文件
[daemon]
# AutomaticLoginEable=ture
# AutomaticLogin=root
# TimedLoginEnable=true
# 注释上面的

vim /etc/gconf/gconf.xml.defaults/%gconf-tree.xml
查找 disable_user,大概650多行左右
<entry name="disable_user_switching" mtime="1515459981" type="schem     a" stype="bool" owner="gnome">
                                                 <local_schema locale="C" short_desc="Disable user switching     ">
                                                         <default type="bool" value="false"/>
                                                         <longdesc>
# 把fales改为true

<entry name="disable_user_switching" mtime="1515459981" type="schem     a" stype="bool" owner="gnome">
                                                 <local_schema locale="C" short_desc="Disable user switching     ">
                                                         <default type="bool" value="true"/>
                                                         <longdesc>
```

#### 升级linux内核

```

```

#### 网卡配置

- `cd /etc/sysconfig/network-scripts`

```bash
DEVICE="eth0"
IPV6INIT="yes"
#BOOTPROTO="dhcp"
BOOTPROTO="static"
#UUID="63919ce5-6a60-4060-b66b-05ccb63831b1"
ONBOOT="yes"
IPADDR=10.211.55.9
NETMASK=255.255.255.0
GATEWAY=10.211.55.1
DNS1=8.8.8.8
DNS2=144.144.144.144
```





### 十、Python

```
\033[41;1mred lighting is on .....\033[0m
#-*-coding:utf-8 -*-


attribute
if __name__  =='__main__':  
	print（“xxx”）

这句话的意思的区别是否把这个脚本当作一个模块去调用，
如果别人导入调用你的脚本，那么这下面的就不执行
如果自己来执行这个脚本那么，这句话下面的代码就执行
```

### 十一、头大怎么治

- **问题**：目前存在的问题是学的东西太多找不到重点，get不到要点，问问题的时候能想起来大概回答不出来，头就很大。
- **需求**：快速get和学会东西



- 要求

  - 看东西全看两遍
    - 第一遍知道大概，第二遍抽重点，第三遍的话就看心情和精力还有是否要继续深入研究
  - 以此为戒（2018-08-01）

  ### 十二、没事敲敲的命令

```
systemctl set-default multi-user.target 
systemctl set-default graphical.target



```



### 十三、服务

#### Nginx

```bash
# 虚拟主机设置
server{
        listen 81;
        root   /usr/share/nginx/html/phpadmin/;
        index  index.php index.html index.htm;

        location ~ \.php$ {
            fastcgi_pass   127.0.0.1:9000;
            fastcgi_index  index.php;
            fastcgi_split_path_info  ^((?U).+\.php)(/?.+)$;
            fastcgi_param  SCRIPT_FILENAME  $document_root$fastcgi_script_name;
            fastcgi_param  SCRIPT_FILENAME  /usr/share/nginx/html/phpadmin$fastcgi_script_name;
            fastcgi_param  PATH_INFO  $fastcgi_path_info;
            fastcgi_param  PATH_TRANSLATED  $document_root$fastcgi_path_info;
            include        fastcgi_params;
        }
# 注意权限，以及日志报错的情况排查错误
```

#####  开启php





#### Httpd

##### 虚拟机

```bash
vim /etc/httpd/conf.d/virtualhost.conf   
<VirtualHost *:80>
        ServerName  www.82ndlf.com						# 名称
        DocumentRoot  "/var/www/html/blog/" 			# 定义站点路径
        redirect temp / https://www.82ndlf.com/ 		# 重定向到https
        <Directory "/var/www/html/blog/">				# 设置权限
                Options None
                AllowOverride  None
                Require all granted
        </Directory>
</VirtualHost>
```

##### https

```bash
Listen 443 https
SSLPassPhraseDialog exec:/usr/libexec/httpd-ssl-pass-dialog
SSLSessionCache         shmcb:/run/httpd/sslcache(512000)
SSLSessionCacheTimeout  300
SSLRandomSeed startup file:/dev/urandom  256
SSLRandomSeed connect builtin
SSLCryptoDevice builtin
<VirtualHost _default_:443>
DocumentRoot "/var/www/html/blog"
ServerName www.82ndlf.com:443
ErrorLog logs/ssl_error_log
TransferLog logs/ssl_access_log
LogLevel warn
SSLEngine on
SSLProtocol all -SSLv2 -SSLv3
SSLCipherSuite HIGH:3DES:!aNULL:!MD5:!SEED:!IDEA
SSLCertificateFile /etc/httpd/ssl/2_www.82ndlf.com.crt
SSLCertificateKeyFile /etc/httpd/ssl/3_www.82ndlf.com.key
SSLCertificateChainFile /etc/httpd/ssl/1_root_bundle.crt
<Files ~ "\.(cgi|shtml|phtml|php3?)$">
    SSLOptions +StdEnvVars
</Files>
<Directory "/var/www/cgi-bin">
    SSLOptions +StdEnvVars
</Directory>
BrowserMatch "MSIE [2-5]" \
         nokeepalive ssl-unclean-shutdown \
         downgrade-1.0 force-response-1.0
CustomLog logs/ssl_request_log \
          "%t %h %{SSL_PROTOCOL}x %{SSL_CIPHER}x \"%r\" %b"
</VirtualHost>            
```



##### 开启php

快速开启

```bash
yum -y install php
systemctl restart  httpd
# 安装php之后就可以使用php
```



### 十四、命令

#### date

```
date +"%F %T"
2018-11-06 13:55:38
 +%F日历   +%T时间（几点几分） +%Y年  +%m月份  +%d日  +%H时  +%M分  +%s秒  +%S(从1970年计算的秒数)



```



#### openssl

```
生成随机数：
openssl rand -hex 10
```

#### ntpdate

```
ntpdate -u 133.100.11.8 				//同步到日本的服务器时间
ntpdate -u ntp.api.bz					 //直接用域名同步中国上海时间
ntpdate -u 17.253.68.253 					//中国上海时间同步服务器IP
```

#### history

```
[root@centos7 ~]#HISTTIMEFORMAT="%F %T "---加时间
[root@centos7 ~]#HISTIGNORE="ll*"---忽略以ll开头的命令
[root@centos7 ~]#HISTCONTROL=ignoreboth---忽略重复和以空白开头的命令
```

#### watch

```
watch -n1 ss -ntl
```

#### 解压/压缩 命令

```bash
解压/压缩 命令
unzip
压　缩：tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称
查　询：tar -jtv -f filename.tar.bz2
解压缩：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录

tar -zxvf 
	- x 解压
	- c 创建新文件
	- v 显示过程
	- f 指定备份文件

tar -cvf log.tar log2012.log  	   仅打包，不压缩！ 
tar -zcvf log.tar.gz log2012.log   打包后，以 gzip 压缩 
tar -jcvf log.tar.bz2 log2012.log  打包后，以 bzip2 压缩 

压　缩：tar -jcv -f filename.tar.bz2 要被压缩的文件或目录名称
查　询：tar -jtv -f filename.tar.bz2
解压缩：tar -jxv -f filename.tar.bz2 -C 欲解压缩的目录

备份文件夹内容是排除部分文件：
tar --exclude scf/service -zcvf scf.tar.gz scf/*

zcat 
zgrep

tar -zcvf script.tar.gz home ---打包压缩成gzip格式
tar -jcf script.tar.bz home/ ---打包压缩成bzip2格式
tar -Jcf script.tar.xz home/ ---打包压缩成xz格式
tar -xf script.tar.gz   ---解包
 tar -jcvf list.tar.bz -T list.txt   ---调用要打包压缩的文件列表，如果有很多文件要打包压缩，可以用这种方法。list.txt里面列了很多文件
```

#### dd命令

生成一个1000M的test文件，文件内容为全0（因从/dev/zero中读取，/dev/zero为0源）。但是这样为实际写入硬盘，文件产生速度取决于硬盘读写速度，如果想要产生超大文件，速度很慢。

```
 [root@izwz94jtz9hbdq165vpxpxz www]# dd if=/dev/zero of=test1 bs=1M count=1000
 1000+0 records in
 1000+0 records out
 1048576000 bytes (1.0 GB) copied, 16.6081 s, 63.1 MB/s       //内存操作速度
```

在某种场景下，我们只想让文件系统认为存在一个超大文件在此，但是并不实际写入硬盘。则可以使用 **seek**

1）count=0 表示读写 0次，指定生成文件的大小为0M

```
  [root@izwz94jtz9hbdq165vpxpxz www]# dd if=/dev/zero of=test2 bs=1M count=0 seek=100000
  0+0 records in
  0+0 records out
  0 bytes (0 B) copied, 0.000221494 s, 0.0 kB/s
```

2）count=50 表示读写 50次，指定生成文件的大小为50M

```
  [root@izwz94jtz9hbdq165vpxpxz www]# dd if=/dev/zero of=test3 bs=1M count=50 seek=100000
  50+0 records in
  50+0 records out
  52428800 bytes (52 MB) copied, 0.066445 s, 789 MB/s
 [root@izwz94jtz9hbdq165vpxpxz www]# ls -l test3              //查看目录大小
 -rw-r--r-- 1 root root 104910028800 Aug  3 23:50 test3 
```

此时创建的文件在文件系统中的显示大小为100000MB，但是并不实际占用block，因此创建速度与内存速度相当。

> - if （input file）代表输入文件/目录，如果不指定 if，默认就会从 stdin 中读取输入
> - of （output file）代表输出文件/目录，如果不指定 of，默认就会将 stdout 作为默认输出
> - bs 代表每次读入的block大小
> - count：读取的block个数
> 	bs*count=文件大小
> - /dev/zero 是Linux提供的一个特殊的字符设备，它的特点是可以永远读该文件，每次读取的结果都是二进制0
> - seek：跳过输出文件中指定大小的部分，并不实际写入

#### truncate 命令

> 将文件缩减或扩展至指定大小。
> 选项 -s，即 size（大小）
> 1）指定文件不存在则创建。
> 2）指定文件超出指定大小则超出的数据将丢失。
> 3）指定文件小于指定大小则用0 补足。

```
 [root@izwz94jtz9hbdq165vpxpxz www]# truncate -s 10G test4
 [root@izwz94jtz9hbdq165vpxpxz www]# ls -l test4
 -rw-r--r-- 1 root root 10737418240 Aug  3 23:14 test4
```

注意点：
这种文件被称为“空洞文件”，文件的部分内容并没有实际存在于硬盘上
du （disk use）：默认显示的是真正的磁盘占用。

```
 [root@izwz94jtz9hbdq165vpxpxz www]# truncate -s 1G 123.jpg    ///文件不存在时自动创建
 [root@izwz94jtz9hbdq165vpxpxz www]# ls -l 123.jpg
 -rw-r--r-- 1 root root 1073741824 Aug  4 00:12 123.jpg
 [root@izwz94jtz9hbdq165vpxpxz www]# du 123.jpg
 0  123.jpg
 [root@izwz94jtz9hbdq165vpxpxz www]# truncate -s 500M 123.jpg      //修改文件大小
 [root@izwz94jtz9hbdq165vpxpxz www]# ls -l 123.jpg
 -rw-r--r-- 1 root root 524288000 Aug  4 00:13 123.jpg
 [root@izwz94jtz9hbdq165vpxpxz www]# du 123.jpg
 0  123.jpg
```

#### fallocate 命令

```
 [root@izwz94jtz9hbdq165vpxpxz www]#fallocate -l 10G test4
 fallocate: test4: fallocate failed: Operation not supported    //目录创建失败，只生成了空目录
 [root@izwz94jtz9hbdq165vpxpxz www]# ls -l test4
 -rw-r--r-- 1 root root 0 Aug  4 00:29 test4
 [root@izwz94jtz9hbdq165vpxpxz www]# du test4
 0  test4
```

> fallocate 命令可以为文件预分配物理空间。
> -l 后接空间大小，默认单位为字节。也可后跟k、m、g、t、p、e来指定单位，分别代表KB、MB、GB、TB、PB、EB

 

 

 

 

 

### 十五、mage群分享

#### 1、快速构建ceph可视化监控系统

- [点我](https://ceph.com/planet/%E5%BF%AB%E9%80%9F%E6%9E%84%E5%BB%BAceph%E5%8F%AF%E8%A7%86%E5%8C%96%E7%9B%91%E6%8E%A7%E7%B3%BB%E7%BB%9F/)

#### 2、Prometheus

- [点我](https://yunlzheng.gitbook.io/prometheus-book/parti-prometheus-ji-chu/quickstart/prometheus-quick-start)







### 十六、小技巧

##### root自动登录

```
[root@node1-python ~]#cat /etc/gdm/custom.conf
# GDM configuration storage

[daemon]
AutomaticLoginEnable=true
AutomaticLogin=root 

[security]
wuerlong
```

### 十七、所有命令

```

init 3 zifu 
init 6 tuixng 
runlevel
who -r 

ctrl+d = logout quit exit
ctrl+l = clear

[root@node1-python ~]#vim /etc/profile.d/env.sh
[root@node1-python ~]#cat /etc/profile.d/env.sh
export PS1="\[\e[33m\][\u@\h \w]\\$\[\e[0m\]"
[root@node1-python ~]#. /etc/profile.d/env.sh  


# 登陆后显示 欢迎信息
welcome to erlong.com
[root@node1-python ~]#vim /etc/motd 

# 登陆显示信息脚本存档位置
[root@node1 ~]$vim /etc/profile.d/kaiji.sh


```

#### route

```
route -n
route del -net xxx.xxx.xxx.xxx gw xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx
route add -net xxx.xxx.xxx.xxx gw xxx.xxx.xxx.xxx netmask xxx.xxx.xxx.xxx
route add -net 0.0.0.0 gw 10.211.55.1 netmask 0.0.0.0

```

#### find

```
find ./ -type f -regex ".*\.\w+$" | sed -r -n 's#(.*\.)(.*)$#mv & \1log#e'
(.*\.)(.*)$   查找模式
mv & \1log   执行命令替换
```



# 十八、Mac 相关

## 搭建apache和ftp

- 一、原因
  - 有时候在学习或者工作的时候需要一个web或者ftp服务器，而mac本身就携带web和ftp服务器的功能

- 二、WEB服务器搭建
  - 1）开启命令：sudo apachectl start /restart
  - 2) 关闭命令：sudo apachectl stop
  - 3)服务器默认页面路径：/Libiary/WebServer/Documents
  - 4)服务器配置文件：/etc/apache2/httpd.conf  
    - 可修改端口
    - 定义DocumentRoot，服务器根路径，
    - 定义DirectoryIndex，默认文件，另外还有错误日志文件等
  - 5)查看apache版本：sudo apachectl -v
- 三、FTP服务器
  - 1）开启命令：sudo -s launchctl load -w /System/Library/LaunchDaemons/ftp.plist
  - 2) 关闭命令：sudo -s launchctl unload -w /System/Library/LaunchDaemons/ftp.plist
```
设置开机自启：编辑ftp.plist文件
<dict>
<key>Disable</key> //修改为Enabled
```



# 十九、bug软件集合

## 1、WeChatTweak

- 让 Mac 微信支持多开
- [点我git](https://github.com/Sunnyyoung/WeChatTweak-macOS)
- [点我blog](https://lai.yuweining.cn/archives/1466/)

### 2、dzzoffice

- 协同办公软件



# 二十、各种链接

##### 1、[原]红帽 Red Hat Linux相关产品iso镜像下载【百度云】【更新6.10】

- [点我](http://www.linuxfly.org/post/659)











# 二十一、各种问题的链接

1、[apache 的网页内容显示是乱码](https://blog.csdn.net/newman0708/article/details/2841297)





# 二十二、各种服务

#### 邮件服务器搭建



### 接口文档服务

- [MinDoc简介](https://www.iminho.me/wiki/docs/mindoc/mindoc-summary.md)

-  [ShowDoc](https://blog.csdn.net/leochang130731/article/details/78403403)

#### web服务器搭建

##### lamp



##### lnmp



##### docker

```

sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
  "registry-mirrors": ["https://04zlo3pl.mirror.aliyuncs.com"]
}
EOF
```



#### git

```bash
# 自定义Git
git config --global color.ui true
git config --global alias.st status 
git config --global alias.co checkout
git config --global alias.ci commit
git config --global alias.br branch
git config --global alias.last 'log -1'
git config --global alias.unstage 'reset HEAD'
git config --global alias.lg "log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit"


git init
git config --global user.name "sandengjiubanv"
git config --global user.email "1611269762@qq.com"
git add [filename]
git commit -m "discurbe"
git status
git diff [filename]
git last
git log
git log --pretty=oneline
git reset --hard HEAD^
git reset --hard HEAD~100
git reset --hard 1094a
git reflog
git clone


git remote rm origin     # 删除远程 Git 仓库
git push -u origin master

# 查看分支：
git branch

# 创建分支：
git branch <name>

# 切换分支：
git checkout <name>

# 创建+切换分支：
git checkout -b <name>

# 合并某分支到当前分支：
git merge <name>

# 删除分支：
git branch -d <name>


# 查看分支合并图
git log --graph
git log --graph --pretty=oneline --abbrev-commit
```





# 二十三、墙外



1、安装ssr linux客户端

```
https://blog.csdn.net/Taneemy/article/details/80335345
```

2、下载youtube视频

```
答：使用强大的youtube-dl吧，项目源码：https://github.com/rg3/youtube-dl

安装 youtube-dl：

pip install --upgrade youtube_dl
使用方法：

# https://www.youtube.com/watch?v=nNGmruHS3r8 => 需要下载的视频URL
# 执行下列命令缓存到当前目录
youtube-dl https://www.youtube.com/watch?v=nNGmruHS3r8
离线取回：

# 利用 python 即可快速创建一个临时 WEB 服务，当其他 Node 的 http-sever 也可以的。
python -m SimpleHTTPServer 8080
现在要下载一个视频 MP3 轨道，我们需要以下两个选项：

–extract-audio （短选项-x） -视频文件转换为纯音频文件。
–audio-format -指定音频格式，其中该文件将被下载。 支持的音频格式是“最佳”，“aac”，“vorbis”，“mp3”，“m4a”，“opus”或“wav” “best”默认设置
要将视频下载为mp3文件，可以使用以下命令之一：

youtube-dl -x --audio-format mp3 https://www.youtube.com/watch?v=jwD4AEVBL6Q
那么如果我们已经下载了视频格式，结果还想要音频MP3呢？
答：可以使用 ffmpeg 格式转换工具

# 以下命令可以将 123.mp4 文件转换成 123.mp3 文件
ffmpeg -i 123.mp4 123.mp3



```



3、linux主机翻墙

```bash
yum -y install python-pip
pip install --upgrade pip
pip install shadowsocks
cat > /etc/shadowsocks.json << EOF
{
"server":"144.172.116.116",
"server_port":10086,
"local_port":1080,
"password":"erlong10086",
"timeout":600,
"method":"aes-256-cfb"
}
EOF

sslocal -c /etc/shadowsocks.json -d restart
setssr
curl --socks5 127.0.0.1:1080 ip.gs
# 取消翻墙 unsetssr
```

-  [让终端走代理的几种方法](https://blog.fazero.me/2015/09/15/%E8%AE%A9%E7%BB%88%E7%AB%AF%E8%B5%B0%E4%BB%A3%E7%90%86%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/)



```
CentOS下shadowsock服务端搭建及客户端全局http代理的实现
1. 服务端：

cat > /etc/profile.d/privoxy.sh << EOF
export http_proxy=http://127.0.0.1:8118
export https_proxy=http://127.0.0.1:8118
EOF




```



### [CentOS下shadowsock服务端搭建及客户端全局http代理的实现](http://blog.51cto.com/11975865/2308030)